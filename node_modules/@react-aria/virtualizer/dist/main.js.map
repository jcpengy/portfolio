{"mappings":"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","sources":["./node_modules/@parcel/scope-hoisting/lib/helpers.js","./packages/@react-aria/virtualizer/src/utils.ts","./packages/@react-aria/virtualizer/src/ScrollView.tsx","./packages/@react-aria/virtualizer/src/useVirtualizerItem.ts","./packages/@react-aria/virtualizer/src/VirtualizerItem.tsx","./packages/@react-aria/virtualizer/src/Virtualizer.tsx"],"sourcesContent":["function $parcel$interopDefault(a) {\n  return a && a.__esModule ? a.default : a;\n}\n\nfunction $parcel$defineInteropFlag(a) {\n  Object.defineProperty(a, '__esModule', {value: true});\n}\n\nfunction $parcel$exportWildcard(dest, source) {\n  Object.keys(source).forEach(function(key) {\n    if (key === 'default' || key === '__esModule') {\n      return;\n    }\n\n    Object.defineProperty(dest, key, {\n      enumerable: true,\n      get: function get() {\n        return source[key];\n      },\n    });\n  });\n\n  return dest;\n}\n\nfunction $parcel$missingModule(name) {\n  var err = new Error(\"Cannot find module '\" + name + \"'\");\n  err.code = 'MODULE_NOT_FOUND';\n  throw err;\n}\n\nvar $parcel$global =\n  typeof globalThis !== 'undefined'\n    ? globalThis\n    : typeof self !== 'undefined'\n    ? self\n    : typeof window !== 'undefined'\n    ? window\n    : typeof global !== 'undefined'\n    ? global\n    : {};\n","/*\n * Copyright 2020 Adobe. All rights reserved.\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License. You may obtain a copy\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\n * OF ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n */\n\nimport {Direction} from '@react-types/shared';\n\nexport type RTLOffsetType =\n  | 'negative'\n  | 'positive-descending'\n  | 'positive-ascending';\n\nlet cachedRTLResult: RTLOffsetType | null = null;\n\n\n// Original licensing for the following methods can be found in the\n// NOTICE file in the root directory of this source tree.\n// See https://github.com/bvaughn/react-window/blob/master/src/createGridComponent.js\n\n// According to the spec, scrollLeft should be negative for RTL aligned elements.\n// Chrome does not seem to adhere; its scrollLeft values are positive (measured relative to the left).\n// Safari's elastic bounce makes detecting this even more complicated wrt potential false positives.\n// The safest way to check this is to intentionally set a negative offset,\n// and then verify that the subsequent \"scroll\" event matches the negative offset.\n// If it does not match, then we can assume a non-standard RTL scroll implementation.\nexport function getRTLOffsetType(recalculate: boolean = false): RTLOffsetType {\n  if (cachedRTLResult === null || recalculate) {\n    const outerDiv = document.createElement('div');\n    const outerStyle = outerDiv.style;\n    outerStyle.width = '50px';\n    outerStyle.height = '50px';\n    outerStyle.overflow = 'scroll';\n    outerStyle.direction = 'rtl';\n\n    const innerDiv = document.createElement('div');\n    const innerStyle = innerDiv.style;\n    innerStyle.width = '100px';\n    innerStyle.height = '100px';\n\n    outerDiv.appendChild(innerDiv);\n\n    document.body.appendChild(outerDiv);\n\n    if (outerDiv.scrollLeft > 0) {\n      cachedRTLResult = 'positive-descending';\n    } else {\n      outerDiv.scrollLeft = 1;\n      if (outerDiv.scrollLeft === 0) {\n        cachedRTLResult = 'negative';\n      } else {\n        cachedRTLResult = 'positive-ascending';\n      }\n    }\n\n    document.body.removeChild(outerDiv);\n\n    return cachedRTLResult;\n  }\n\n  return cachedRTLResult;\n}\n\nexport function getScrollLeft(node: HTMLElement, direction: Direction): number {\n  let {scrollLeft} = node;\n\n  // scrollLeft in rtl locales differs across browsers, so normalize.\n  // See comment by getRTLOffsetType below for details.\n  if (direction === 'rtl') {\n    let {scrollWidth, clientWidth} = node;\n    switch (getRTLOffsetType()) {\n      case 'negative':\n        scrollLeft = -scrollLeft;\n        break;\n      case 'positive-descending':\n        scrollLeft = scrollWidth - clientWidth - scrollLeft;\n        break;\n    }\n  }\n\n  return scrollLeft;\n}\n\nexport function setScrollLeft(node: HTMLElement, direction: Direction, scrollLeft: number) {\n  if (direction === 'rtl') {\n    switch (getRTLOffsetType()) {\n      case 'negative':\n        scrollLeft = -scrollLeft;\n        break;\n      case 'positive-ascending':\n        break;\n      default: {\n        const {clientWidth, scrollWidth} = node;\n        scrollLeft = scrollWidth - clientWidth - scrollLeft;\n        break;\n      }\n    }\n  }\n\n  node.scrollLeft = scrollLeft;\n}\n","/*\n * Copyright 2020 Adobe. All rights reserved.\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License. You may obtain a copy\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\n * OF ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n */\n\n// @ts-ignore\nimport {flushSync} from 'react-dom';\nimport {getScrollLeft} from './utils';\nimport React, {\n  CSSProperties,\n  HTMLAttributes,\n  ReactNode,\n  RefObject,\n  useCallback,\n  useEffect,\n  useRef,\n  useState\n} from 'react';\nimport {Rect, Size} from '@react-stately/virtualizer';\nimport {useLayoutEffect} from '@react-aria/utils';\nimport {useLocale} from '@react-aria/i18n';\nimport {useResizeObserver} from '@react-aria/utils';\n\ninterface ScrollViewProps extends HTMLAttributes<HTMLElement> {\n  contentSize: Size,\n  onVisibleRectChange: (rect: Rect) => void,\n  children: ReactNode,\n  innerStyle?: CSSProperties,\n  sizeToFit?: 'width' | 'height',\n  onScrollStart?: () => void,\n  onScrollEnd?: () => void,\n  scrollDirection?: 'horizontal' | 'vertical' | 'both'\n}\n\nfunction ScrollView(props: ScrollViewProps, ref: RefObject<HTMLDivElement>) {\n  let {\n    contentSize,\n    onVisibleRectChange,\n    children,\n    innerStyle,\n    sizeToFit,\n    onScrollStart,\n    onScrollEnd,\n    scrollDirection = 'both',\n    ...otherProps\n  } = props;\n\n  let defaultRef = useRef();\n  ref = ref || defaultRef;\n  let state = useRef({\n    scrollTop: 0,\n    scrollLeft: 0,\n    scrollEndTime: 0,\n    scrollTimeout: null,\n    width: 0,\n    height: 0,\n    isScrolling: false\n  }).current;\n  let {direction} = useLocale();\n\n  let [isScrolling, setScrolling] = useState(false);\n  let onScroll = useCallback((e) => {\n    if (e.target !== e.currentTarget) {\n      return;\n    }\n\n    if (props.onScroll) {\n      props.onScroll(e);\n    }\n\n    flushSync(() => {\n      let scrollTop = e.currentTarget.scrollTop;\n      let scrollLeft = getScrollLeft(e.currentTarget, direction);\n\n      // Prevent rubber band scrolling from shaking when scrolling out of bounds\n      state.scrollTop = Math.max(0, Math.min(scrollTop, contentSize.height - state.height));\n      state.scrollLeft = Math.max(0, Math.min(scrollLeft, contentSize.width - state.width));\n\n      onVisibleRectChange(new Rect(state.scrollLeft, state.scrollTop, state.width, state.height));\n\n      if (!state.isScrolling) {\n        state.isScrolling = true;\n        setScrolling(true);\n\n        if (onScrollStart) {\n          onScrollStart();\n        }\n      }\n\n      // So we don't constantly call clearTimeout and setTimeout,\n      // keep track of the current timeout time and only reschedule\n      // the timer when it is getting close.\n      let now = Date.now();\n      if (state.scrollEndTime <= now + 50) {\n        state.scrollEndTime = now + 300;\n\n        clearTimeout(state.scrollTimeout);\n        state.scrollTimeout = setTimeout(() => {\n          state.isScrolling = false;\n          setScrolling(false);\n          state.scrollTimeout = null;\n\n          if (onScrollEnd) {\n            onScrollEnd();\n          }\n        }, 300);\n      }\n    });\n  }, [props, direction, state, contentSize, onVisibleRectChange, onScrollStart, onScrollEnd]);\n\n  // eslint-disable-next-line arrow-body-style\n  useEffect(() => {\n    return () => {\n      clearTimeout(state.scrollTimeout);\n    };\n  }, []);\n\n  let updateSize = useCallback(() => {\n    let dom = ref.current;\n    if (!dom) {\n      return;\n    }\n\n    let w = dom.clientWidth;\n    let h = dom.clientHeight;\n    if (sizeToFit && contentSize.width > 0 && contentSize.height > 0) {\n      if (sizeToFit === 'width') {\n        w = Math.min(w, contentSize.width);\n      } else if (sizeToFit === 'height') {\n        h = Math.min(h, contentSize.height);\n      }\n    }\n\n    if (state.width !== w || state.height !== h) {\n      state.width = w;\n      state.height = h;\n      onVisibleRectChange(new Rect(state.scrollLeft, state.scrollTop, w, h));\n    }\n  }, [onVisibleRectChange, ref, state, sizeToFit, contentSize]);\n\n  useLayoutEffect(() => {\n    updateSize();\n  }, [updateSize]);\n  useResizeObserver({ref, onResize: updateSize});\n\n  let style: React.CSSProperties = {\n    // Reset padding so that relative positioning works correctly. Padding will be done in JS layout.\n    padding: 0,\n    ...otherProps.style\n  };\n\n  if (scrollDirection === 'horizontal') {\n    style.overflowX = 'auto';\n    style.overflowY = 'hidden';\n  } else if (scrollDirection === 'vertical') {\n    style.overflowY = 'auto';\n    style.overflowX = 'hidden';\n  } else {\n    style.overflow = 'auto';\n  }\n\n  return (\n    <div {...otherProps} style={style} ref={ref} onScroll={onScroll}>\n      <div role=\"presentation\" style={{width: contentSize.width, height: contentSize.height, pointerEvents: isScrolling ? 'none' : 'auto', position: 'relative', ...innerStyle}}>\n        {children}\n      </div>\n    </div>\n  );\n}\n\nconst ScrollViewForwardRef = React.forwardRef(ScrollView);\nexport {ScrollViewForwardRef as ScrollView};\n","/*\n * Copyright 2020 Adobe. All rights reserved.\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License. You may obtain a copy\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\n * OF ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n */\n\nimport {RefObject, useCallback} from 'react';\nimport {ReusableView, Size} from '@react-stately/virtualizer';\nimport {useLayoutEffect} from '@react-aria/utils';\n\ninterface VirtualizerItemOptions<T extends object, V> {\n  reusableView: ReusableView<T, V>,\n  ref: RefObject<HTMLElement>\n}\n\nexport function useVirtualizerItem<T extends object, V>(options: VirtualizerItemOptions<T, V>) {\n  let {reusableView: {layoutInfo, virtualizer}, ref} = options;\n\n  let updateSize = useCallback(() => {\n    let size = getSize(ref.current);\n    virtualizer.updateItemSize(layoutInfo.key, size);\n  }, [virtualizer, layoutInfo.key, ref]);\n\n  useLayoutEffect(() => {\n    if (layoutInfo.estimatedSize) {\n      updateSize();\n    }\n  });\n\n  return {updateSize};\n}\n\nfunction getSize(node: HTMLElement) {\n  // Reset height before measuring so we get the intrinsic size\n  let height = node.style.height;\n  node.style.height = '';\n  let size = new Size(node.scrollWidth, node.scrollHeight);\n  node.style.height = height;\n  return size;\n}\n","/*\n * Copyright 2020 Adobe. All rights reserved.\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License. You may obtain a copy\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\n * OF ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n */\n\nimport {Direction} from '@react-types/shared';\nimport {LayoutInfo, ReusableView} from '@react-stately/virtualizer';\nimport React, {CSSProperties, useRef} from 'react';\nimport {useLocale} from '@react-aria/i18n';\nimport {useVirtualizerItem} from './useVirtualizerItem';\n\ninterface VirtualizerItemProps<T extends object, V> {\n  reusableView: ReusableView<T, V>,\n  parent?: ReusableView<T, V>,\n  className?: string\n}\n\nexport function VirtualizerItem<T extends object, V>(props: VirtualizerItemProps<T, V>) {\n  let {className, reusableView, parent} = props;\n  let {direction} = useLocale();\n  let ref = useRef();\n  useVirtualizerItem({\n    reusableView,\n    ref\n  });\n\n  return (\n    <div role=\"presentation\" ref={ref} className={className} style={layoutInfoToStyle(reusableView.layoutInfo, direction, parent && parent.layoutInfo)}>\n      {reusableView.rendered}\n    </div>\n  );\n}\n\nlet cache = new WeakMap();\nexport function layoutInfoToStyle(layoutInfo: LayoutInfo, dir: Direction, parent?: LayoutInfo | null): CSSProperties {\n  let xProperty = dir === 'rtl' ? 'right' : 'left';\n  let cached = cache.get(layoutInfo);\n  if (cached && cached[xProperty] != null) {\n    if (!parent) {\n      return cached;\n    }\n\n    // Invalidate if the parent position changed.\n    let top = layoutInfo.rect.y - parent.rect.y;\n    let x = layoutInfo.rect.x - parent.rect.x;\n    if (cached.top === top && cached[xProperty] === x) {\n      return cached;\n    }\n  }\n\n  let style: CSSProperties = {\n    position: layoutInfo.isSticky ? 'sticky' : 'absolute',\n    overflow: 'hidden',\n    top: layoutInfo.rect.y - (parent ? parent.rect.y : 0),\n    [xProperty]: layoutInfo.rect.x - (parent ? parent.rect.x : 0),\n    transition: 'all',\n    WebkitTransition: 'all',\n    WebkitTransitionDuration: 'inherit',\n    transitionDuration: 'inherit',\n    width: layoutInfo.rect.width,\n    height: layoutInfo.rect.height,\n    opacity: layoutInfo.opacity,\n    zIndex: layoutInfo.zIndex,\n    transform: layoutInfo.transform,\n    contain: 'size layout style paint'\n  };\n\n  cache.set(layoutInfo, style);\n  return style;\n}\n","/*\n * Copyright 2020 Adobe. All rights reserved.\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License. You may obtain a copy\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\n * OF ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n */\n\nimport {Collection} from '@react-types/shared';\nimport {focusWithoutScrolling, mergeProps, useLayoutEffect} from '@react-aria/utils';\nimport {Layout, Rect, ReusableView, useVirtualizerState, VirtualizerState} from '@react-stately/virtualizer';\nimport React, {FocusEvent, HTMLAttributes, Key, ReactElement, RefObject, useCallback, useEffect, useRef} from 'react';\nimport {ScrollView} from './ScrollView';\nimport {VirtualizerItem} from './VirtualizerItem';\n\ninterface VirtualizerProps<T extends object, V> extends HTMLAttributes<HTMLElement> {\n  children: (type: string, content: T) => V,\n  renderWrapper?: (\n    parent: ReusableView<T, V> | null,\n    reusableView: ReusableView<T, V>,\n    children: ReusableView<T, V>[],\n    renderChildren: (views: ReusableView<T, V>[]) => ReactElement[]\n  ) => ReactElement,\n  layout: Layout<T>,\n  collection: Collection<T>,\n  focusedKey?: Key,\n  sizeToFit?: 'width' | 'height',\n  scrollDirection?: 'horizontal' | 'vertical' | 'both',\n  transitionDuration?: number,\n  isLoading?: boolean,\n  onLoadMore?: () => void,\n  shouldUseVirtualFocus?: boolean\n}\n\nfunction Virtualizer<T extends object, V>(props: VirtualizerProps<T, V>, ref: RefObject<HTMLDivElement>) {\n  let {\n    children: renderView,\n    renderWrapper,\n    layout,\n    collection,\n    sizeToFit,\n    scrollDirection,\n    transitionDuration,\n    isLoading,\n    onLoadMore,\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    focusedKey,\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    shouldUseVirtualFocus,\n    ...otherProps\n  } = props;\n\n  let fallbackRef = useRef<HTMLDivElement>();\n  ref = ref || fallbackRef;\n\n  let state = useVirtualizerState({\n    transitionDuration,\n    layout,\n    collection,\n    renderView,\n    renderWrapper: renderWrapper || defaultRenderWrapper,\n    onVisibleRectChange(rect) {\n      ref.current.scrollLeft = rect.x;\n      ref.current.scrollTop = rect.y;\n    }\n  });\n\n  let {virtualizerProps} = useVirtualizer(props, state, ref);\n\n  // Handle scrolling, and call onLoadMore when nearing the bottom.\n  let onVisibleRectChange = useCallback((rect: Rect) => {\n    state.setVisibleRect(rect);\n\n    if (!isLoading && onLoadMore) {\n      let scrollOffset = state.virtualizer.contentSize.height - rect.height * 2;\n      if (rect.y > scrollOffset) {\n        onLoadMore();\n      }\n    }\n  }, [isLoading, onLoadMore, state]);\n\n  useLayoutEffect(() => {\n    if (!isLoading && onLoadMore && !state.isAnimating) {\n      if (state.contentSize.height <= state.virtualizer.visibleRect.height) {\n        onLoadMore();\n      }\n    }\n  }, [state.contentSize, state.isAnimating, state.virtualizer, onLoadMore, isLoading]);\n\n  return (\n    <ScrollView\n      {...mergeProps(otherProps, virtualizerProps)}\n      ref={ref}\n      innerStyle={state.isAnimating ? {transition: `none ${state.virtualizer.transitionDuration}ms`} : undefined}\n      contentSize={state.contentSize}\n      onVisibleRectChange={onVisibleRectChange}\n      onScrollStart={state.startScrolling}\n      onScrollEnd={state.endScrolling}\n      sizeToFit={sizeToFit}\n      scrollDirection={scrollDirection}>\n      {state.visibleViews}\n    </ScrollView>\n  );\n}\n\ninterface VirtualizerOptions {\n  focusedKey?: Key,\n  scrollToItem?: (key: Key) => void,\n  shouldUseVirtualFocus?: boolean\n}\n\nexport function useVirtualizer<T extends object, V, W>(props: VirtualizerOptions, state: VirtualizerState<T, V, W>, ref: RefObject<HTMLElement>) {\n  let {focusedKey, scrollToItem, shouldUseVirtualFocus} = props;\n  let {virtualizer} = state;\n\n  // Scroll to the focusedKey when it changes. Actually focusing the focusedKey\n  // is up to the implementation using Virtualizer since we don't have refs\n  // to all of the item DOM nodes.\n  let lastFocusedKey = useRef(null);\n  useEffect(() => {\n    if (virtualizer.visibleRect.height === 0) {\n      return;\n    }\n\n    if (focusedKey !== lastFocusedKey.current) {\n      if (scrollToItem) {\n        scrollToItem(focusedKey);\n      } else {\n        virtualizer.scrollToItem(focusedKey, {duration: 0});\n      }\n    }\n\n    lastFocusedKey.current = focusedKey;\n  }, [focusedKey, virtualizer.visibleRect.height, virtualizer, lastFocusedKey, scrollToItem]);\n\n  let isFocusWithin = useRef(false);\n  let onFocus = useCallback((e: FocusEvent) => {\n    // If the focused item is scrolled out of view and is not in the DOM, the collection\n    // will have tabIndex={0}. When tabbing in from outside, scroll the focused item into view.\n    // We only want to do this if the collection itself is receiving focus, not a child\n    // element, and we aren't moving focus to the collection from within (see below).\n    if (e.target === ref.current && !isFocusWithin.current) {\n      virtualizer.scrollToItem(focusedKey, {duration: 0});\n    }\n\n    isFocusWithin.current = e.target !== ref.current;\n  }, [ref, virtualizer, focusedKey]);\n\n  let onBlur = useCallback((e: FocusEvent) => {\n    isFocusWithin.current = ref.current.contains(e.relatedTarget as Element);\n  }, [ref]);\n\n  // When the focused item is scrolled out of view and is removed from the DOM,\n  // move focus to the collection view as a whole if focus was within before.\n  let focusedView = virtualizer.getView(focusedKey);\n  useEffect(() => {\n    if (focusedKey && !focusedView && isFocusWithin.current && document.activeElement !== ref.current) {\n      focusWithoutScrolling(ref.current);\n    }\n  });\n\n  // Set tabIndex to -1 if the focused view is in the DOM, otherwise 0 so that the collection\n  // itself is tabbable. When the collection receives focus, we scroll the focused item back into\n  // view, which will allow it to be properly focused. If using virtual focus, don't set a\n  // tabIndex at all so that VoiceOver on iOS 14 doesn't try to move real DOM focus to the element anyway.\n  let tabIndex: number;\n  if (!shouldUseVirtualFocus) {\n    tabIndex = focusedView ? -1 : 0;\n  }\n\n  return {\n    virtualizerProps: {\n      tabIndex,\n      onFocus,\n      onBlur\n    }\n  };\n}\n\n// forwardRef doesn't support generic parameters, so cast the result to the correct type\n// https://stackoverflow.com/questions/58469229/react-with-typescript-generics-while-using-react-forwardref\nconst _Virtualizer = React.forwardRef(Virtualizer) as <T extends object, V>(props: VirtualizerProps<T, V> & {ref?: RefObject<HTMLDivElement>}) => ReactElement;\nexport {_Virtualizer as Virtualizer};\n\nfunction defaultRenderWrapper<T extends object, V>(\n  parent: ReusableView<T, V> | null,\n  reusableView: ReusableView<T, V>\n) {\n  return (\n    <VirtualizerItem\n      key={reusableView.key}\n      reusableView={reusableView}\n      parent={parent} />\n  );\n}\n"],"names":["$parcel$interopDefault","a","__esModule","default","cachedRTLResult","getRTLOffsetType","recalculate","outerDiv","document","createElement","outerStyle","style","width","height","overflow","direction","innerDiv","innerStyle","appendChild","body","scrollLeft","removeChild","getScrollLeft","node","scrollWidth","clientWidth","setScrollLeft","ScrollView","props","ref","contentSize","onVisibleRectChange","children","sizeToFit","onScrollStart","onScrollEnd","scrollDirection","otherProps","defaultRef","useRef","state","scrollTop","scrollEndTime","scrollTimeout","isScrolling","current","useLocale","setScrolling","useState","onScroll","useCallback","e","target","currentTarget","flushSync","Math","max","min","Rect","now","Date","clearTimeout","setTimeout","useEffect","updateSize","dom","w","h","clientHeight","useLayoutEffect","useResizeObserver","onResize","padding","overflowX","overflowY","pointerEvents","position","ScrollViewForwardRef","React","forwardRef","useVirtualizerItem","options","reusableView","layoutInfo","virtualizer","size","getSize","updateItemSize","key","estimatedSize","Size","scrollHeight","VirtualizerItem","className","parent","layoutInfoToStyle","rendered","cache","WeakMap","dir","xProperty","cached","get","top","rect","y","x","isSticky","transition","WebkitTransition","WebkitTransitionDuration","transitionDuration","opacity","zIndex","transform","contain","set","Virtualizer","renderView","renderWrapper","layout","collection","isLoading","onLoadMore","fallbackRef","useVirtualizerState","defaultRenderWrapper","virtualizerProps","useVirtualizer","setVisibleRect","scrollOffset","isAnimating","visibleRect","mergeProps","undefined","startScrolling","endScrolling","visibleViews","focusedKey","scrollToItem","shouldUseVirtualFocus","lastFocusedKey","duration","isFocusWithin","onFocus","onBlur","contains","relatedTarget","focusedView","getView","activeElement","focusWithoutScrolling","tabIndex","_Virtualizer"],"version":3,"file":"main.js.map"}